{"version":3,"file":"ipc-channel-main.js","sourceRoot":"","sources":["ipc-channel-main.ts"],"names":[],"mappings":";;AAAA,uCAAkD;AAClD,mEAA+D;AAE/D,MAAqB,cAAe,SAAQ,0BAAW;IAErD,YAAY,OAAe,EAAE,IAA+C;QAC1E,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QACjC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;IAChC,CAAC;IAED,IAAI,aAAa;QACf,OAAO,kBAAO,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IAC7C,CAAC;IAEM,EAAE,CAAC,QAAkB;QAC1B,kBAAO,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;IACrC,CAAC;IAEM,IAAI,CAAC,QAAkB;QAC5B,kBAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;IACvC,CAAC;IAEM,cAAc,CAAC,QAAkB;QACtC,kBAAO,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;IACjD,CAAC;IAEM,kBAAkB;QACvB,kBAAO,CAAC,kBAAkB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IAC3C,CAAC;IAEM,IAAI,CAAC,IAAQ;QAClB,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAClB,OAAO,CAAC,KAAK,CAAC,0BAA0B,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;YAC5D,OAAO;SACR;QACD,OAAO,wBAAa;aACnB,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;aACrB,WAAW;aACX,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IAC5B,CAAC;CACF;AArCD,iCAqCC","sourcesContent":["import { ipcMain, BrowserWindow } from 'electron';\nimport { ApiListener } from '@akashaproject/core/ipcPreloader';\n\nexport default class IpcChannelMain extends ApiListener {\n  protected windowId;\n  constructor(channel: string, opts: {channelName?: string, windowId?: string}) {\n    super(channel, opts.channelName);\n    this.windowId = opts.windowId;\n  }\n\n  get listenerCount() {\n    return ipcMain.listenerCount(this.channel);\n  }\n\n  public on(listener: Function) {\n    ipcMain.on(this.channel, listener);\n  }\n\n  public once(listener: Function) {\n    ipcMain.once(this.channel, listener);\n  }\n\n  public removeListener(listener: Function) {\n    ipcMain.removeListener(this.channel, listener);\n  }\n\n  public removeAllListeners() {\n    ipcMain.removeAllListeners(this.channel);\n  }\n\n  public send(data: {}) {\n    if (!this.windowId) {\n      console.error(`windowId is not set on ${this.channelName}`);\n      return;\n    }\n    return BrowserWindow\n    .fromId(this.windowId)\n    .webContents\n    .send(this.channel, data);\n  }\n}\n"]}