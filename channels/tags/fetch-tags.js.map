{"version":3,"file":"fetch-tags.js","sourceRoot":"","sources":["fetch-tags.ts"],"names":[],"mappings":";;AAAA,oCAAoC;AACpC,+DAA2E;AAE9D,QAAA,oBAAoB,GAAG;IAClC,EAAE,EAAE,iBAAiB;IACrB,IAAI,EAAE,QAAQ;IACd,UAAU,EAAE;QACV,SAAS,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;QAC7B,OAAO,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE;KAC5B;IACD,QAAQ,EAAE,CAAC,WAAW,EAAE,SAAS,CAAC;CACnC,CAAC;AAEF,SAAwB,IAAI,CAAC,EAAE,EAAE,UAAU;IACzC,MAAM,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,EAAE,IAAI;QAC/C,MAAM,CAAC,GAAG,IAAI,UAAU,CAAC,uBAAW,CAAC,gBAAgB,CAAC,CAAC,SAAS,EAAE,CAAC;QACnE,CAAC,CAAC,QAAQ,CAAC,IAAI,EAAE,4BAAoB,EAAE,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC;QAE7D,MAAM,KAAK,GAAG,MAAM,UAAU,CAAC,uBAAW,CAAC,SAAS,CAAC;aACpD,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAC/B,MAAM,UAAU,GAAG,MAAM,KAAK,CAAC,GAAG,EAAE,CAAC;QACrC,OAAO,EAAE,UAAU,EAAE,CAAC;IACxB,CAAC,CAAC,CAAC;IAEH,MAAM,SAAS,GAAG,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,CAAC;IACtD,MAAM,OAAO,GAAG;QACd,OAAO,SAAS,CAAC;IACnB,CAAC,CAAC;IACF,EAAE,EAAE,CAAC,OAAO,CAAC,uBAAW,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;IAE7C,OAAO,SAAS,CAAC;AACnB,CAAC;AAlBD,uBAkBC","sourcesContent":["import * as Promise from 'bluebird';\nimport { CORE_MODULE, TAGS_MODULE } from '@akashaproject/common/constants';\n\nexport const getTagsCreatedSchema = {\n  id: '/getTagsCreated',\n  type: 'object',\n  properties: {\n    fromBlock: { type: 'number' },\n    toBlock: { type: 'number' },\n  },\n  required: ['fromBlock', 'toBlock'],\n};\n\nexport default function init(sp, getService) {\n  const execute = Promise.coroutine(function* (data) {\n    const v = new getService(CORE_MODULE.VALIDATOR_SCHEMA).Validator();\n    v.validate(data, getTagsCreatedSchema, { throwError: true });\n\n    const event = yield getService(CORE_MODULE.CONTRACTS)\n    .instance.Tags.TagCreate(data);\n    const collection = yield event.get();\n    return { collection };\n  });\n\n  const fetchTags = { execute, name: 'getTagsCreated' };\n  const service = function () {\n    return fetchTags;\n  };\n  sp().service(TAGS_MODULE.fetchTags, service);\n\n  return fetchTags;\n}\n"]}