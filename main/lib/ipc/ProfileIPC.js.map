{"version":3,"file":"ProfileIPC.js","sourceRoot":"","sources":["ProfileIPC.ts"],"names":[],"mappings":"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","sourcesContent":["import { GethConnector } from '@akashaproject/geth-connector';\nimport { module as userModule } from './modules/auth/index';\nimport { module as profileModule } from './modules/profile/index';\nimport ModuleEmitter from './event/ModuleEmitter';\nimport { constructed as contracts } from './contracts/index';\nimport channels from '../channels';\nimport { generalSettings, BASE_URL } from './config/settings';\nimport { mainResponse } from './event/responses';\nimport WebContents = Electron.WebContents;\nimport * as Promise from 'bluebird';\n\nclass ProfileIPC extends ModuleEmitter {\n\n    constructor() {\n        super();\n        this.MODULE_NAME = 'profile';\n        this.DEFAULT_MANAGED = ['getProfileData', 'getMyBalance', 'getIpfs'];\n    }\n\n    public initListeners(webContents: WebContents) {\n        this.webContents = webContents;\n        this._getMyBalance()\n            ._getProfileData()\n            ._unregister()\n            ._follow()\n            ._getFollowers()\n            ._getFollowersCount()\n            ._getFollowing()\n            ._getFollowingCount()\n            ._updateProfileData()\n            ._manager();\n    }\n\n    private _getProfileData() {\n        this.registerListener(\n            channels.server[this.MODULE_NAME].getProfileData,\n            (event: any, data: ProfileDataRequest) => {\n                let response: ProfileDataResponse;\n                var s = Promise.coroutine(function* (data1) {\n                    const ipfsHash = yield contracts.instance.profile.getIpfs(data1.profile);\n                    const profile = (data1.full) ? yield profileModule.helpers.resolveProfile(ipfsHash, data1.resolveImages):\n                        yield profileModule.helpers.getShortProfile(ipfsHash, data1.resolveImages);\n                    const akashaId = yield contracts.instance.profile.getId(data1.profile);\n                    response = mainResponse(Object.assign(\n                        { username: akashaId, [BASE_URL]: generalSettings.get(BASE_URL), profile: data1.profile },\n                        profile));\n                    return response;\n                });\n                // just for testing purpose\n                s(data).catch((err: Error) => {\n                        response = mainResponse({\n                            error: {\n                                message: err.message,\n                                from: data.profile\n                            }\n                        });\n                    })\n                    .finally(() => {\n                        this.fireEvent(\n                            channels.client[this.MODULE_NAME].getProfileData,\n                            response,\n                            event\n                        );\n                    });\n            }\n        );\n        return this;\n    }\n\n    private _updateProfileData() {\n        this.registerListener(\n            channels.server[this.MODULE_NAME].updateProfileData,\n            (event: any, data: ProfileUpdateRequest) => {\n                let response: ProfileUpdateResponse;\n                profileModule\n                    .helpers\n                    .create(data.ipfs)\n                    .then((ipfsHash: string) => {\n                        return contracts.instance\n                            .registry\n                            .getMyProfile()\n                            .then((address: string) => {\n                                if(!address){\n                                    throw new Error('No profile found to update');\n                                }\n                                return contracts\n                                    .instance\n                                    .profile\n                                    .updateHash(ipfsHash, address, data.gas)\n                            });\n                    })\n                    .then((txData: any) => {\n                        return userModule.auth.signData(txData, data.token);\n                    })\n                    .then((tx: string) => {\n                        response = mainResponse({ tx });\n                    })\n                    .catch((err: Error) => {\n                        response = mainResponse({\n                            error: {\n                                message: err.message,\n                                from: data.ipfs\n                            }\n                        });\n                    })\n                    .finally(() => {\n                        this.fireEvent(\n                            channels.client[this.MODULE_NAME].updateProfileData,\n                            response,\n                            event\n                        );\n                    });\n            }\n        );\n        return this;\n    }\n\n    private _getMyBalance() {\n        this.registerListener(\n            channels.server[this.MODULE_NAME].getMyBalance,\n            (event: any, data: MyBalanceRequest) => {\n                let response: MyBalanceResponse;\n                const etherBase = (data.etherBase) ? data.etherBase : GethConnector.getInstance().web3.eth.defaultAccount;\n                return GethConnector.getInstance()\n                    .web3\n                    .eth\n                    .getBalanceAsync(etherBase)\n                    .then((weiAmount: string) => {\n                        const unit = (data.unit) ? data.unit : 'ether';\n                        const value = GethConnector.getInstance()\n                            .web3\n                            .fromWei(weiAmount, unit);\n                        if (!etherBase) {\n                            throw new Error('No ethereum address specified');\n                        }\n                        response = mainResponse({value: value.toString(10), unit});\n                    })\n                    .catch((err: Error) => {\n                        response = mainResponse({ error: { message: err.message } });\n                    })\n                    .finally(() => {\n                        this.fireEvent(\n                            channels.client[this.MODULE_NAME].getMyBalance,\n                            response,\n                            event\n                        );\n                    });\n            }\n        );\n        return this;\n    }\n\n    private _unregister() {\n        this.registerListener(\n            channels.server[this.MODULE_NAME].unregister,\n            (event: any, data: ProfileUnregisterRequest) => {\n                let response: any;\n                contracts\n                    .instance\n                    .profile\n                    .unregister(data.profileAddress)\n                    .then((txData) => {\n                        return userModule.auth.signData(txData, data.token);\n                    })\n                    .then((tx: string) => {\n                        response = mainResponse({ tx });\n                    })\n                    .catch((err: Error) => {\n                        response = mainResponse({ error: { message: err.message } });\n                    })\n                    .finally(() => {\n                        this.fireEvent(\n                            channels.client[this.MODULE_NAME].unregister,\n                            response,\n                            event\n                        );\n                    });\n            }\n        );\n        return this;\n    }\n\n    private _follow() {\n        this.registerListener(\n            channels.server[this.MODULE_NAME].follow,\n            (event: any, data: ProfileFollowRequest) => {\n                let response: ProfileFollowResponse;\n                contracts.instance\n                    .feed\n                    .follow(data.profileAddress)\n                    .then((txData) => {\n                        return userModule.auth.signData(txData, data.token);\n                    })\n                    .then((tx: string) => {\n                        response = mainResponse({ tx, profileAddress: data.profileAddress });\n                    })\n                    .catch((err: Error) => {\n                        response = mainResponse({ error: { message: err.message, profileAddress: data.profileAddress } });\n                    })\n                    .finally(() => {\n                        this.fireEvent(\n                            channels.client[this.MODULE_NAME].follow,\n                            response,\n                            event\n                        );\n                    });\n            }\n        );\n        return this;\n    }\n\n\n    private _unFollow() {\n        this.registerListener(\n            channels.server[this.MODULE_NAME].unFollow,\n            (event: any, data: ProfileFollowRequest) => {\n                let response: ProfileFollowResponse;\n                contracts.instance\n                    .feed\n                    .unFollow(data.profileAddress)\n                    .then((txData) => {\n                        return userModule.auth.signData(txData, data.token);\n                    })\n                    .then((tx: string) => {\n                        response = mainResponse({ tx, profileAddress: data.profileAddress });\n                    })\n                    .catch((err: Error) => {\n                        response = mainResponse({ error: { message: err.message, profileAddress: data.profileAddress } });\n                    })\n                    .finally(() => {\n                        this.fireEvent(\n                            channels.client[this.MODULE_NAME].unFollow,\n                            response,\n                            event\n                        );\n                    });\n            }\n        );\n        return this;\n    }\n\n    private _getFollowersCount() {\n        this.registerListener(\n            channels.server[this.MODULE_NAME].getFollowersCount,\n            (event: any, data: GetFollowerCountRequest) => {\n                let response;\n                 contracts\n                    .instance\n                    .feed.getFollowersCount(data.profileId)\n                    .then((count: any) => {\n                        response = mainResponse({ count, profileId: data.profileId });\n                    })\n                    .catch((err: Error) => {\n                    response = mainResponse({ error: { message: err.message } });\n                    })\n                    .finally(() => {\n                        this.fireEvent(\n                            channels.client[this.MODULE_NAME].getFollowersCount,\n                            response,\n                            event\n                        );\n                    })\n                ;\n            }\n        );\n        return this;\n    }\n\n    private _getFollowingCount() {\n        this.registerListener(\n            channels.server[this.MODULE_NAME].getFollowingCount,\n            (event: any, data: GetFollowerCountRequest) => {\n                let response;\n                contracts\n                    .instance\n                    .feed\n                    .getFollowingCount(data.profileId)\n                    .then((count: any) => {\n                        response = mainResponse({ count, profileId: data.profileId });\n                    }).catch((err: Error) => {\n                    response = mainResponse({ error: { message: err.message } });\n                    })\n                    .finally(() => {\n                        this.fireEvent(\n                            channels.client[this.MODULE_NAME].getFollowingCount,\n                            response,\n                            event\n                        );\n                    })\n                ;\n            }\n        );\n        return this;\n    }\n\n    private _getFollowers() {\n        this.registerListener(\n            channels.server[this.MODULE_NAME].getFollowers,\n            (event: any, data: GetFollowersRequest) => {\n                let response: GetFollowersResponse;\n                contracts.instance.main.getFollowersCount(data.profileAddress)\n                    .then((count: any) => {\n                        const followers = [];\n                        const start = (data.from) ? data.from : 0;\n                        const stop = (data.to) ? (data.to < count) ? data.to : count : count;\n                        for (let i = start; i < stop; i++) {\n                            followers.push(\n                                contracts.instance\n                                    .main\n                                    .getFollowerAt(data.profileAddress, i)\n                            )\n                        }\n                        return Promise.all(followers);\n                    }).then((followers: string[]) => {\n                    response = mainResponse({\n                        followers,\n                        from: data.from,\n                        to: data.to,\n                        profileAddress: data.profileAddress\n                    });\n                }).catch((err: Error) => {\n                    response = mainResponse({\n                        error: {\n                            message: err.message,\n                            from: data.profileAddress\n                        }\n                    });\n                })\n                    .finally(() => {\n                        this.fireEvent(\n                            channels.client[this.MODULE_NAME].getFollowers,\n                            response,\n                            event\n                        );\n                    })\n                ;\n            }\n        );\n        return this;\n    }\n\n    private _getFollowing() {\n        this.registerListener(\n            channels.server[this.MODULE_NAME].getFollowers,\n            (event: any, data: GetFollowersRequest) => {\n                let response: GetFollowingResponse;\n                contracts.instance.main.getFollowingCount(data.profileAddress)\n                    .then((count: any) => {\n                        const following = [];\n                        const start = (data.from) ? data.from : 0;\n                        const stop = (data.to) ? (data.to < count) ? data.to : count : count;\n                        for (let i = start; i < stop; i++) {\n                            following.push(\n                                contracts.instance\n                                    .main\n                                    .getFollowingAt(data.profileAddress, i)\n                            )\n                        }\n                        return Promise.all(following);\n                    })\n                    .then((following: string[]) => {\n                        response = mainResponse({\n                            following,\n                            from: data.from,\n                            to: data.to,\n                            profileAddress: data.profileAddress\n                        });\n                    }).catch((err: Error) => {\n                    response = mainResponse({\n                        error: {\n                            message: err.message,\n                            from: data.profileAddress\n                        }\n                    });\n                })\n                    .finally(() => {\n                        this.fireEvent(\n                            channels.client[this.MODULE_NAME].getFollowing,\n                            response,\n                            event\n                        );\n                    })\n                ;\n            }\n        );\n        return this;\n    }\n}\n\nexport default ProfileIPC;\n"]}