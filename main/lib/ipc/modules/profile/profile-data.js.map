{"version":3,"file":"profile-data.js","sourceRoot":"","sources":["profile-data.ts"],"names":[],"mappings":";AAAA,MAAY,OAAO,WAAM,UAAU,CAAC,CAAA;AACpC,wBAAyC,uBAAuB,CAAC,CAAA;AACjE,uBAAgD,QAAQ,CAAC,CAAA;AACzD,2BAA0C,uBAAuB,CAAC,CAAA;AAMlE,MAAM,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,WAAU,IAAwB;IAChE,MAAM,QAAQ,GAAG,MAAM,mBAAS,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IACxE,MAAM,OAAO,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,MAAM,qBAAc,CAAC,QAAQ,EAAE,IAAI,CAAC,aAAa,CAAC;QAC5E,MAAM,sBAAe,CAAC,QAAQ,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;IAExD,MAAM,QAAQ,GAAG,MAAM,mBAAS,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IACtE,MAAM,CAAC,MAAM,CAAC,MAAM,CAChB;QACI,QAAQ,EAAE,QAAQ;QAClB,CAAC,mBAAQ,CAAC,EAAE,0BAAe,CAAC,GAAG,CAAC,mBAAQ,CAAC;QACzC,OAAO,EAAE,IAAI,CAAC,OAAO;KACxB,EACD,OAAO,CAAC,CAAC;AAEjB,CAAC,CAAC,CAAC;AAEH;kBAAe,EAAE,OAAO,EAAE,IAAI,EAAE,gBAAgB,EAAE,CAAC","sourcesContent":["import * as Promise from 'bluebird';\nimport { constructed as contracts } from '../../contracts/index';\nimport { resolveProfile, getShortProfile } from './ipfs';\nimport { generalSettings, BASE_URL } from '../../config/settings';\n\n/**\n * Get profile data for an akasha profile address\n * @type {Function}\n */\nconst execute = Promise.coroutine(function*(data: ProfileDataRequest) {\n    const ipfsHash = yield contracts.instance.profile.getIpfs(data.profile);\n    const profile = (data.full) ? yield resolveProfile(ipfsHash, data.resolveImages) :\n        yield getShortProfile(ipfsHash, data.resolveImages);\n\n    const akashaId = yield contracts.instance.profile.getId(data.profile);\n    return Object.assign(\n        {\n            akashaId: akashaId,\n            [BASE_URL]: generalSettings.get(BASE_URL),\n            profile: data.profile\n        },\n        profile);\n\n});\n\nexport default { execute, name: 'getProfileData' };\n"]}