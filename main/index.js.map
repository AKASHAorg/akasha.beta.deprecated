{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":"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","sourcesContent":["/// <reference path=\"typings/main.d.ts\" />\nimport { app, crashReporter, BrowserWindow } from 'electron';\nimport { GethConnector } from '@akashaproject/geth-connector';\nimport { IpfsConnector } from '@akashaproject/ipfs-connector';\nimport { resolve } from 'path';\nimport { initModules } from './lib/ipc/index';\n\nconst viewHtml = resolve(__dirname, '../app');\nconst modules = initModules();\ncrashReporter.start({\n    productName: 'Akasha',\n    companyName: 'Akasha Project',\n    submitURL: 'https://github.com/AkashaProject/node-app/',\n    autoSubmit: false\n});\n\nif (process.env.NODE_ENV === 'development') {\n    require('electron-debug')({ showDevTools: true });\n}\n\napp.on('window-all-closed', () => {\n    if (process.platform !== 'darwin') app.quit();\n});\n\n\napp.on('ready', () => {\n    const mainWindow = new BrowserWindow({\n        width: 1280,\n        height: 720,\n        resizable: true,\n        show: false,\n        webPreferences: {\n            // nodeIntegration: false,\n            preload: resolve(__dirname, 'preloader.js')\n        }\n    });\n    // BrowserWindow.addDevToolsExtension('/home/marius/.config/chromium/Default/Extensions/fmkadmapgofadopljbjfkapdkoienihi/0.15.0_0');\n    if (process.env.HOT) {\n        mainWindow.loadURL(`file://${viewHtml}/hot-dev-app.html`);\n    } else {\n        mainWindow.loadURL(`file://${viewHtml}/app.html`);\n    }\n\n    mainWindow.once('close', (ev: Event) => {\n        ev.preventDefault();\n        modules.flushAll();\n        GethConnector.getInstance().stop();\n        IpfsConnector.getInstance().stop();\n        setTimeout(() => app.quit(), 300);\n    });\n\n    mainWindow.webContents.on('did-finish-load', () => {\n        modules.logger.registerLogger('APP');\n        modules.initListeners(mainWindow.webContents);\n    });\n\n    mainWindow.once('ready-to-show', () => {\n        mainWindow.show();\n        mainWindow.focus();\n    });\n\n    mainWindow.webContents.on('crashed', () => {\n        modules.logger.getLogger('APP').warn('APP CRASHED');\n    });\n    mainWindow.on('unresponsive', () => {\n        modules.logger.getLogger('APP').warn('APP is unresponsive');\n    });\n    process.on('uncaughtException', (err: Error) => {\n        console.log(err);\n        modules.logger.getLogger('APP').error(`${err.message} ${err.stack}`);\n    });\n});\n\n"]}